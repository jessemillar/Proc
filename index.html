<html>
<head>
	<title>Proc</title>

	<link type = "text/css" rel = "stylesheet" href = "main.css" />
</head>
<body onload = "init()" onkeydown = "key(event)">
	<input id = "summary" type = "text" value = "pros vs cons" onkeyup = "filename()" onchange = "filename()" onmouseover = "show()" onmouseout = "hide()">
	<textarea id = "pros" onfocus = "hide()"></textarea>
	<textarea id = "cons" onfocus = "hide()"></textarea>
</body>
</html>

<script>
	function init()
	{
		if (typeof(Storage) == 'undefined') // Check for localStorage support
		{
			alert("Your browser doesn't seem to support local storage.  That's a bit of a deal breaker for Proc since we won't be able to save what you've written.")
		}
		else // Load localStorage values if they exist
		{
			if (localStorage.pros)
			{
				document.getElementById('pros').value = localStorage.pros
			}
			
			if (localStorage.cons)
			{
				document.getElementById('cons').value = localStorage.cons
			}
			
			if (localStorage.summary)
			{
				document.getElementById('summary').value = localStorage.summary
				filename()
			}
		}
	}

	function filename() // Update the title of the page based on the summary content
	{
		document.title = 'Proc // ' + document.getElementById('summary').value
	}

	function show()
	{
		document.getElementById('summary').style.bottom = 0
	}

	function hide()
	{
		document.getElementById('summary').style.bottom = -65
	}

	function key(event)
	{
		// Save the typed values to localStorage
		localStorage.pros = document.getElementById('pros').value
		localStorage.cons = document.getElementById('cons').value
		localStorage.summary = document.getElementById('summary').value

		if (event.keyCode == 9) // Tab key
		{
			event.preventDefault()

			if (document.activeElement.id == 'pros')
			{
				document.getElementById('cons').focus()
			}
			else
			{
				document.getElementById('pros').focus()
			}
		}
	}
</script>